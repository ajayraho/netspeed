<Window x:Class="NetworkSpeedWidget.BlockedProcessesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Blocked Processes Manager" 
        Height="450" 
        Width="600"
        WindowStartupLocation="CenterOwner"
        Background="#FF1E1E1E">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" 
                Background="#FF2D2D30" 
                Padding="20,15"
                BorderBrush="#FF3F3F46"
                BorderThickness="0,0,0,1">
            <StackPanel>
                <TextBlock Text="ðŸš« Network Blocked Processes" 
                          FontSize="18" 
                          FontWeight="Bold"
                          Foreground="White"/>
                <TextBlock x:Name="CountText"
                          Text="(0 processes blocked)"
                          FontSize="12"
                          Foreground="#FF999999"
                          Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- Action Bar -->
        <Border Grid.Row="1" 
                Background="#FF252526" 
                Padding="20,12"
                BorderBrush="#FF3F3F46"
                BorderThickness="0,0,0,1">
            <Grid>
                <Button Content="ðŸ—‘ï¸ Remove All Blocks" 
                       Width="180"
                       Height="35"
                       HorizontalAlignment="Left"
                       Background="#FFFF5722"
                       Foreground="White"
                       BorderThickness="0"
                       FontSize="13"
                       FontWeight="SemiBold"
                       Cursor="Hand"
                       Click="RemoveAllBlocks_Click">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}" 
                                               CornerRadius="5">
                                            <ContentPresenter HorizontalAlignment="Center" 
                                                            VerticalAlignment="Center"
                                                            Margin="5"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#FFFF7043"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Background" Value="#FF3E3E42"/>
                                    <Setter Property="Foreground" Value="#FF666666"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

                <Button Content="ðŸ”„ Refresh" 
                       Width="110"
                       Height="35"
                       HorizontalAlignment="Right"
                       Background="#FF007ACC"
                       Foreground="White"
                       BorderThickness="0"
                       FontSize="13"
                       FontWeight="SemiBold"
                       Cursor="Hand"
                       Click="Refresh_Click">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}" 
                                               CornerRadius="5">
                                            <ContentPresenter HorizontalAlignment="Center" 
                                                            VerticalAlignment="Center"
                                                            Margin="5"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#FF0098FF"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </Grid>
        </Border>

        <!-- Blocked Processes List -->
        <ScrollViewer Grid.Row="2" 
                     VerticalScrollBarVisibility="Auto"
                     Background="#FF252526">
            <ItemsControl x:Name="BlockedProcessesList" 
                         Margin="10">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="#FF2D2D30" 
                               Padding="15,12"
                               Margin="0,0,0,8"
                               BorderBrush="#FF3F3F46"
                               BorderThickness="1"
                               CornerRadius="5">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="40"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- Icon -->
                                <TextBlock Grid.Column="0" 
                                          Text="ðŸš«" 
                                          FontSize="24"
                                          VerticalAlignment="Center"
                                          HorizontalAlignment="Center"/>

                                <!-- Process Name -->
                                <StackPanel Grid.Column="1" 
                                           VerticalAlignment="Center"
                                           Margin="10,0,0,0">
                                    <TextBlock Text="{Binding}" 
                                              FontSize="14"
                                              FontWeight="SemiBold"
                                              Foreground="White"/>
                                    <TextBlock Text="Network traffic blocked" 
                                              FontSize="11"
                                              Foreground="#FFFF9800"
                                              Margin="0,2,0,0"/>
                                </StackPanel>

                                <!-- Unblock Button -->
                                <Button Grid.Column="2" 
                                       Content="âœ… Unblock" 
                                       Width="100"
                                       Height="30"
                                       Background="#FF4CAF50"
                                       Foreground="White"
                                       BorderThickness="0"
                                       FontSize="12"
                                       FontWeight="SemiBold"
                                       Cursor="Hand"
                                       Click="UnblockProcess_Click"
                                       Tag="{Binding}">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border Background="{TemplateBinding Background}" 
                                                               CornerRadius="4">
                                                            <ContentPresenter HorizontalAlignment="Center" 
                                                                            VerticalAlignment="Center"
                                                                            Margin="5"/>
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="#FF66BB6A"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Button.Style>
                                </Button>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <!-- Empty State -->
        <StackPanel x:Name="EmptyState"
                   Grid.Row="2" 
                   VerticalAlignment="Center"
                   HorizontalAlignment="Center"
                   Visibility="Collapsed">
            <TextBlock Text="âœ…" 
                      FontSize="60"
                      HorizontalAlignment="Center"
                      Margin="0,0,0,15"/>
            <TextBlock Text="No processes blocked" 
                      FontSize="16"
                      Foreground="#FF999999"
                      HorizontalAlignment="Center"
                      Margin="0,0,0,5"/>
            <TextBlock Text="All processes have network access" 
                      FontSize="12"
                      Foreground="#FF666666"
                      HorizontalAlignment="Center"/>
        </StackPanel>

        <!-- Footer -->
        <Border Grid.Row="3" 
                Background="#FF2D2D30" 
                Padding="20,12"
                BorderBrush="#FF3F3F46"
                BorderThickness="0,1,0,0">
            <Button Content="Close" 
                   Width="100"
                   Height="32"
                   HorizontalAlignment="Right"
                   Background="#FF3E3E42"
                   Foreground="White"
                   BorderThickness="0"
                   FontSize="13"
                   Cursor="Hand"
                   Click="Close_Click">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" 
                                           CornerRadius="4">
                                        <ContentPresenter HorizontalAlignment="Center" 
                                                        VerticalAlignment="Center"
                                                        Margin="5"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FF555555"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </Border>
    </Grid>
</Window>
